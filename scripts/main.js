"use strict";function doTitleChangeAnimation(){titleChangeAnimation.to(".temp-title",.6,{autoalpha:0,opacity:0,y:-10,ease:Power4.easeOut,onComplete:removeTemp},"+=0").to(".show-info",.6,{css:{maxWidth:"200px"},ease:Power4.easeOut},"+=0.3").fromTo(".peaceradio-loading",.6,{y:10,scale:1},{autoalpha:0,display:"block",opacity:1,y:0,scale:1,ease:Power4.easeOut},"+=0").fromTo(".peaceradio-loading",.6,{y:0},{autoalpha:1,display:"none",opacity:0,y:-10,scale:1,ease:Power4.easeOut},"+=2").to(".show-info",.6,{css:{maxWidth:"530px"},ease:Power4.easeOut},"-=0").fromTo(".current-show",.6,{y:10},{autoalpha:0,display:"block",opacity:1,y:0,ease:Power4.easeOut},"+=0").fromTo(".current",.6,{y:10},{autoalpha:0,display:"block",opacity:1,y:0,ease:Power4.easeOut},"-=0.4")}function removeTemp(){$(".temp-title").remove()}var titleChangeAnimation=new TimelineMax({repeat:0});$(document).ready(function(){$("#headerLiveHolder span.text").peaceRadioLiveTrackInfo({sourceDomain:"http://schedule.peaceradio.com",text:{onAirNow:"On Air",offline:"Offline",current:$(".track-metadata").text(),next:"Next"},updatePeriod:10})}),function(e){e.fn.peaceRadioLiveTrackInfo=function(t){var a={updatePeriod:15,sourceDomain:"http://localhost/",text:{onAirNow:"On Air Now",offline:"Offline",current:"Playing",next:"Next"}};return t=e.extend(!0,a,t),t.sourceDomain=addEndingBackslash(t.sourceDomain),this.each(function(){function a(){if(null!==l){var a=l.getCurrentShow(),o=l.getNextShows(),n=l.currentTrack.getTitle(),i=t.text.offline,c="",s="",u="",d="",p="",h=e(".current").text();a.length>0?(i=t.text.onAirNow,c=a[0].getName(),n=l.currentTrack.getTitle(),s=l.getShowTimeElapsed(a[0]),u=l.getShowTimeRemaining(a[0]),0===n.length||n.indexOf("#peaceradio")>-1&&(n="Stay tuned for the next program")):(i=t.text.offline,c="No Broadcast",n="Peace Radio will be right back! In sha Allah"),o.length>0&&(d=o[0].getName(),p=o[0].getRange()),h!==n&&(r.find("li.current").addClass("temp-title").removeClass("current"),r.find("li.current-show").addClass("temp-title").removeClass("current-show"),r.children("ul").append("<li class='current-show display-none'>"+c+"</li>"),r.children("ul").append("<li class='current display-none'>"+n+"</li>"),doTitleChangeAnimation())}}function o(e){checkWidgetVersion(e),l=new ScheduleData(e)}function n(e,t,a){}function i(){e.ajax({url:t.sourceDomain+"api/live-info/",data:{type:"interval",limit:"5"},dataType:"json",success:function(e){o(e)},error:n}),setTimeout(i,1e3*t.updatePeriod)}var r=e(this),l=null;i(),setInterval(a,5e3)})}}(jQuery);