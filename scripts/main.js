"use strict";function getTimeRemaining(){function e(e){return 1==e.toString().length&&(e="0"+e),e}for(var t=0;t<events.length;t++)if(Date.parse(new Date)<Date.parse(events[t].datetime)){targetDate=events[t];break}var a=Date.parse(targetDate.datetime)-Date.parse(new Date),o=Math.floor(a/1e3%60),n=Math.floor(a/1e3/60%60),i=Math.floor(a/36e5%24),r=Math.floor(a/864e5);return{total:a,days:e(r),hours:e(i),minutes:e(n),seconds:e(o)}}function doTitleChangeAnimation(){titleChangeAnimation.to(".temp-title",.6,{autoalpha:0,opacity:0,y:-10,ease:Power4.easeOut,onComplete:removeTemp},"+=0").to(".show-info",.6,{css:{maxWidth:"200px"},ease:Power4.easeOut},"+=0.3").fromTo(".peaceradio-loading",.6,{y:10,scale:1},{autoalpha:0,display:"block",opacity:1,y:0,scale:1,ease:Power4.easeOut},"+=0").fromTo(".peaceradio-loading",.6,{y:0},{autoalpha:1,display:"none",opacity:0,y:-10,scale:1,ease:Power4.easeOut},"+=2").to(".show-info",.6,{css:{maxWidth:"530px"},ease:Power4.easeOut},"-=0").fromTo(".current-show",.6,{y:10},{autoalpha:0,display:"block",opacity:1,y:0,ease:Power4.easeOut},"+=0").fromTo(".current",.6,{y:10},{autoalpha:0,display:"block",opacity:1,y:0,ease:Power4.easeOut},"-=0.4")}function removeTemp(){$(".temp-title").remove()}var events=[{name:"App Release",publicName:"App Release Countdown",datetime:"February 14 2016 16:00:00 GMT+05:30"},{name:"Full Release",publicName:"Peace Radio Launch Countdown",datetime:"April 16 2016 17:00:00 GMT+05:30"}];$(document).ready(function(){$("#headerLiveHolder span.text").peaceRadioLiveTrackInfo({sourceDomain:"http://schedule.peaceradio.com",text:{onAirNow:"On Air",offline:"Offline",current:$(".track-metadata").text(),next:"Next"},updatePeriod:10})});var targetDate;if(getTimeRemaining()){var countdown=getTimeRemaining(targetDate.datetime),currentTotal=countdown.total;TweenLite.to(countdown,countdown.total,{total:0,roundProps:"total",ease:Linear.easeNone,onUpdate:function(){currentTotal!==this.target.total&&targetDate&&(countdown=getTimeRemaining(),$(".event-in").text(targetDate.publicName),$("#clockdiv .days").text(countdown.days),$("#clockdiv .hours").text(countdown.hours),$("#clockdiv .minutes").text(countdown.minutes),$("#clockdiv .seconds").text(countdown.seconds),currentTotal=this.target.total)}})}else $(".event-in, #countdown, .in-sha-Allah").hide();!function(e){e.fn.peaceRadioLiveTrackInfo=function(t){var a={updatePeriod:15,sourceDomain:"http://localhost/",text:{onAirNow:"On Air Now",offline:"Offline",current:"Playing",next:"Next"}};return t=e.extend(!0,a,t),t.sourceDomain=addEndingBackslash(t.sourceDomain),this.each(function(){function a(){if(null!==l){var a=l.getCurrentShow(),o=l.getNextShows(),n=l.currentTrack.getTitle(),i=t.text.offline,c="",s="",u="",d="",p="",m=e(".current").text();a.length>0?(i=t.text.onAirNow,c=a[0].getName(),n=l.currentTrack.getTitle(),s=l.getShowTimeElapsed(a[0]),u=l.getShowTimeRemaining(a[0]),0===n.length&&(n="No broadcast for this program.")):(i=t.text.offline,c="No Broadcast",n="Peace Radio will be right back! In sha Allah"),o.length>0&&(d=o[0].getName(),p=o[0].getRange()),m!==n&&(r.find("li.current").addClass("temp-title").removeClass("current"),r.find("li.current-show").addClass("temp-title").removeClass("current-show"),r.children("ul").append("<li class='current-show display-none'>"+c+"</li>"),r.children("ul").append("<li class='current display-none'>"+n+"</li>"),doTitleChangeAnimation())}}function o(e){checkWidgetVersion(e),l=new ScheduleData(e)}function n(e,t,a){}function i(){e.ajax({url:t.sourceDomain+"api/live-info/",data:{type:"interval",limit:"5"},dataType:"json",success:function(e){o(e)},error:n}),setTimeout(i,1e3*t.updatePeriod)}var r=e(this),l=null;i(),setInterval(a,5e3)})}}(jQuery);var tl=new TimelineMax({repeat:-1}),tl2=new TimelineMax({repeat:0}),titleChangeAnimation=new TimelineMax({repeat:0});tl.staggerFromTo(".circle",.5,{scale:.1,opacity:0},{opacity:1,scale:1.2},.3),tl2.fromTo(".activity",1,{top:50,opacity:0},{top:0,opacity:1},1),tl2.fromTo("#clockdiv",1,{y:20,opacity:0},{y:0,opacity:1},1),tl2.staggerFromTo("#clockdiv > div",.2,{y:20,opacity:0,ease:new Ease(BezierEasing(.95,.035,.965,.28))},{y:0,opacity:1},.1);